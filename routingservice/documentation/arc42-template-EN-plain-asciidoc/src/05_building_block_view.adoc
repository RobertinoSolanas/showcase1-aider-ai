ifndef::imagesdir[:imagesdir: ../images]

[[section-building-block-view]]
== Building Block View

The Routing Service follows a layered architecture pattern with clear separation of concerns between different components.

=== Whitebox Overall System

image::building-blocks-overview.png["Overall System Building Blocks"]

Motivation::
The architecture separates concerns into distinct layers: presentation (REST API), business logic (services), and data model. This enables independent development, testing, and maintenance of each component.

Contained Building Blocks::
* REST Controller Layer: Handles HTTP requests and responses
* Service Layer: Implements business logic for POI and City retrieval
* Model Layer: Defines data structures for POI and City entities
* Configuration Layer: Manages application configuration and documentation

Important Interfaces::
* HTTP/REST API for external communication
* Service interface for internal component communication

==== POI Controller

Responsible for handling incoming HTTP requests related to Points of Interest and returning appropriate responses.

Interface(s)::
* GET /api/poi?city={city}&isMock={true|false}

Quality/Performance Characteristics::
* Response time < 100ms for mock data
* Supports concurrent requests

Directory/File Location::
* src/main/java/com/smop/routingservice/poi/controller/

Fulfilled Requirements::
* API-1: RESTful POI retrieval
* API-2: Mock data support

==== City Controller

Responsible for handling incoming HTTP requests related to City information and returning appropriate responses.

Interface(s)::
* GET /api/city?city={city}&isMock={true|false}

Quality/Performance Characteristics::
* Response time < 100ms for mock data
* Supports concurrent requests

Directory/File Location::
* src/main/java/com/smop/routingservice/city/controller/

Fulfilled Requirements::
* API-3: RESTful City retrieval
* API-4: Mock data support for cities

==== POI Service

Implements the business logic for retrieving Points of Interest from various data sources.

Interface(s)::
* POIService interface with getPOIs() method

Quality/Performance Characteristics::
* Efficient data retrieval and transformation
* Extensible design for future data sources

Directory/File Location::
* src/main/java/com/smop/routingservice/poi/service/

Fulfilled Requirements::
* BUS-1: POI data retrieval logic
* BUS-2: Mock data implementation

==== City Service

Implements the business logic for retrieving City information from various data sources.

Interface(s)::
* CityService interface with getPOIs() method

Quality/Performance Characteristics::
* Efficient data retrieval and transformation
* Extensible design for future data sources

Directory/File Location::
* src/main/java/com/smop/routingservice/city/service/

Fulfilled Requirements::
* BUS-3: City data retrieval logic
* BUS-4: Mock data implementation for cities

==== POI Model

Defines the data structure for Points of Interest entities used throughout the application.

Interface(s)::
* POI data class with standard getters/setters

Directory/File Location::
* src/main/java/com/smop/routingservice/poi/model/

Fulfilled Requirements::
* DATA-1: Standardized POI data representation

==== City Model

Defines the data structure for City entities used throughout the application.

Interface(s)::
* City data class with standard getters/setters

Directory/File Location::
* src/main/java/com/smop/routingservice/city/model/

Fulfilled Requirements::
* DATA-2: Standardized City data representation

==== Configuration

Manages application configuration including API documentation setup.

Interface(s)::
* Swagger/OpenAPI configuration
* Application properties

Directory/File Location::
* src/main/java/com/smop/routingservice/config/
* src/main/resources/application.properties

Fulfilled Requirements::
* CONF-1: API documentation
* CONF-2: Application configuration

=== Level 2

==== White Box POI Controller

The controller layer consists of a single REST controller that:
1. Receives HTTP GET requests with city and mock parameters
2. Validates input parameters
3. Delegates to the service layer
4. Formats and returns JSON responses

Dependencies:
* POI Service for business logic execution

==== White Box City Controller

The controller layer consists of a single REST controller that:
1. Receives HTTP GET requests with city and mock parameters
2. Validates input parameters
3. Delegates to the service layer
4. Formats and returns JSON responses

Dependencies:
* City Service for business logic execution

==== White Box POI Service

The service implementation:
1. Determines whether to return mock or real data
2. For mock data: Retrieves predefined POIs based on city
3. For real data: Placeholder for future database/external API integration
4. Returns array of POI objects

Dependencies:
* POI Model for data representation

==== White Box City Service

The service implementation:
1. Determines whether to return mock or real data
2. For mock data: Retrieves predefined Cities based on city name
3. For real data: Placeholder for future database/external API integration
4. Returns array of City objects

Dependencies:
* City Model for data representation
